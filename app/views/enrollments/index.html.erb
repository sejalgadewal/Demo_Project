<% if @enrollments.any? %>
  <% @enrollments.each do |enrollment| %>
    <div class="course-box" style="background-color: #f0f0f0; padding: 20px; margin: 10px;">
      <!-- ... (your existing code) ... -->
      <h1 class="card-title">Course Title: <%= enrollment.course.title %></h1>
      <p><strong class="card-text">Description:</strong> <%= enrollment.course.description %></p>

      <% if enrollment.course.documents.attached? %>
        <% enrollment.course.documents.each do |document| %>
          <p>Download File: <%= link_to document.filename, rails_blob_path(document) %></p>
        <% end %>
      <% end %>
      <% if enrollment.course.lectures.any? %>
        <% enrollment.course.lectures.each do |lecture| %>
        <% if lecture.video.attached? %>
            <p>Lecture Video: <%= link_to lecture.video.filename, rails_blob_path(lecture.video, disposition: 'attachment') %></p>
          <% end %>
          <br>
          <% if lecture.quiz.present? %>
            <div style="background-color: #f9f9f9; padding: 10px;">
              <center><h2>Start Quiz</h2></center>
              <h2>Quiz Topic: <%= lecture.quiz.title %></h2>
              <%= form_tag quiz_questions_path(lecture.quiz), method: :get, id: "quiz-form", class: "quiz-form" do %>
                <% lecture.quiz.questions.each do |question| %>
                  <div style="background-color: #fff; border: 1px solid #ccc; padding: 10px; margin: 10px;">
                    <p><strong>Question: <%= question.content %></strong></p>
                    <%#= hidden_field_tag 'questions[]', question.id %>
                    <p><label><%= radio_button_tag "#{question.id}", question.answer1 %>(a) <%= question.answer1 %></label></p>
                    <p><label><%= radio_button_tag "#{question.id}", question.answer2 %>(b) <%= question.answer2 %></label></p>
                    <p><label><%= radio_button_tag "#{question.id}", question.answer3 %>(c) <%= question.answer3 %></label></p>
                    <p><label><%= radio_button_tag "#{question.id}", question.answer4 %>(d) <%= question.answer4 %></label></p>
                  </div>
                <% end %>
                <%= submit_tag 'Submit Answers', class: 'btn btn-primary', id: 'submit-button', disabled: true %>
              
            <div id="error-message" style=" color: red; margin: 10px;">
              notice: "Please select an answer for all questions before submitting the quiz.
            </div>

              <% end %>
            </div>
          <% end %>
        <% end %>
      <% end %>
    </div>
  <% end %>
<% else %>
  <p>No enrollments for this course yet.</p>
<% end %>

<br>
<%= link_to 'Back', courses_path, class: "btn btn-secondary" %>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    var quizForm = document.getElementById("quiz-form");
    var errorContainer = document.getElementById("error-message");

    quizForm.addEventListener("change", validateForm);

    function validateForm() {
      var questionRadios = quizForm.querySelectorAll('input[type="radio"]');
      var allQuestionsAnswered = true;

      questionRadios.forEach(function(radio) {
        var questionId = radio.getAttribute("name");
        var selectedAnswer = quizForm.querySelector('input[name="' + questionId + '"]:checked');
        if (!selectedAnswer) {
          allQuestionsAnswered = false;
        }
      });

      var submitButton = document.getElementById("submit-button");
      submitButton.disabled = !allQuestionsAnswered;

      errorContainer.style.display = allQuestionsAnswered ? "none" : "block";
    }
  });
</script>